(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n.p+"static/media/logo.74cdedb8.png"},36:function(e,t,n){e.exports=n(80)},41:function(e,t,n){},42:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(26),o=n.n(i),c=(n(41),n(27)),l=n(28),s=n(34),m=n(29),d=n(35),u=n(33),p=(n(42),n(30)),w=n.n(p),h=n(31),E=n(32),v=n.n(E);function f(e){return r.a.createElement("div",{className:"flexnowrap"},r.a.createElement("div",{className:"led led-".concat(e.color)}),r.a.createElement("div",null,e.text))}function b(){return r.a.createElement("div",{id:"bottom"},r.a.createElement("div",null,"A ",r.a.createElement("a",{href:"https://grassfedcode.com"},"Chad Smith")," project"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/cs01"},"GitHub")),r.a.createElement("div",null,r.a.createElement("a",{href:"https://twitter.com/grassfedcode"},"Twitter")))}function _(e){return r.a.createElement("div",{id:"top"},r.a.createElement("a",{href:"https://github.com/cs01/termpair"},r.a.createElement("img",{height:"30px",src:w.a,alt:"logo"})))}function g(e){return r.a.createElement("div",{id:"statusbar"}," ",r.a.createElement("div",null,"connected"===e.status?r.a.createElement(f,{color:"green",text:e.status}):r.a.createElement(f,{color:"red",text:e.status})),r.a.createElement("div",null,e.allow_browser_control?r.a.createElement(f,{color:"green",text:"can type"}):r.a.createElement(f,{color:"orange",text:"cannot type"})),r.a.createElement("div",null,e.num_clients?e.num_clients:"0"," Connected Clients"),r.a.createElement("div",null,"Started at"," ",v()(e.broadcast_start_time_iso).format("h:mm:ss a on MMM Do YYYY")))}function y(e){return r.a.createElement("div",{id:"terminal",className:e.status,ref:e.terminalEl})}function O(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),i=n[0],o=n[1];return r.a.createElement("div",{id:"terminal-entry"},"Enter terminal id",r.a.createElement("input",{value:i,onChange:function(e){o(e.target.value)},onKeyDown:function(e){13===e.keyCode&&(window.location="?terminal_id=".concat(i))}}),r.a.createElement("button",{onClick:function(){return window.location="?terminal_id=".concat(i)}},"Connect"),r.a.createElement("p",null,"To view or broadcast a terminal, see instructions at"," ",r.a.createElement("a",{href:"https://github.com/cs01/termpair"},"https://github.com/cs01/termpair")))}var j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={rows:n.props.rows||20,cols:n.props.cols||60,status:"connection-pending",num_clients:n.props.num_clients,terminal_id:n.props.terminal_id},n.term=new h.Terminal({cursorBlink:!0,macOptionIsMeta:!0,scrollback:1e3}),n.terminalEl=r.a.createRef(),n.term.resize(n.state.cols,n.state.rows),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(_,Object.assign({},this.props,this.state)),this.state.terminal_id?r.a.createElement(y,Object.assign({},this.props,{terminalEl:this.terminalEl})):r.a.createElement(O,null),r.a.createElement(g,Object.assign({},this.props,this.state)),r.a.createElement(b,null))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.terminal_id){var t=this.term;if(t.open(document.getElementById("terminal")),t.writeln("Welcome to TermPair!"),t.writeln("https://github.com/cs01/termpair"),!this.state.terminal_id)return t.writeln(""),t.writeln("A valid terminal id was not provided."),t.writeln("To view or broadcast a terminal, see instructions at"),t.writeln("https://github.com/cs01/termpair"),void this.setState({status:"disconnected"});t.writeln("Connecting to terminal...");var n="https:"===window.location.protocol?"wss":"ws",a=new WebSocket("".concat(n,"://").concat(window.location.hostname,":").concat(window.location.port,"/connect_browser_to_terminal?terminal_id=").concat(this.state.terminal_id));t.on("key",function(e,t){a.send(e)}),a.addEventListener("open",function(n){e.setState({status:"connected"}),t.writeln("Connection established")}),a.addEventListener("close",function(n){e.setState({status:"disconnected"}),t.writeln("Connection ended"),e.setState({num_clients:0,terminal_id:null})}),a.addEventListener("message",function(n){var a=JSON.parse(n.data);"new_output"===a.event?t.write(atob(a.payload)):"resize"===a.event?(clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout(function(){e.term.resize(a.payload.cols,a.payload.rows),e.setState({rows:a.payload.rows,cols:a.payload.cols})},500)):"num_clients"===a.event?e.setState({num_clients:a.payload}):console.error("unknown event type",a)})}}}]),t}(a.Component);o.a.render(r.a.createElement(j,window.initial_data),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.112e3e7c.chunk.js.map