{% extends "djmicrosip_tareas\base.html" %}
{% block title %}Inicio{% endblock %}

<!-- CSS Code -->
{% block style_css %}{% endblock %}

<!-- JavaScript Code -->
{% block js_code %}
{{ block.super }} 
	<script src="{{STATIC_URL}}js/countdown.min.js"></script>
	<script src="{{STATIC_URL}}js/countdown.task.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$("#id_period_start_datetime, #id_period_end_datetime").datetimepicker({
				format:'Y-m-d H:m',
        		inline:false
			});
		});

		setInterval(function () {
	    var fecha_inicio = new Date($("#id_period_start_datetime").val());
	    var fecha_fin = new Date($("#id_period_end_datetime").val());
	    var units = $("#id_period_quantity").val();
	    var interval = $("#id_period_unit option:selected").val();
	    var next_execution =  new Date($("#id_next_execution").val());
	    var text = TaskCountDown(fecha_inicio, fecha_fin, units, interval, next_execution);
	    $("#id_siguiente_ejecucion_text").html(text);
	    
		}, 1000);
	</script>
{% endblock %}

{% block breadcrumb %}
  {{ block.super }} 
  <li class="hidden-xs"><a href="/tareas/tareas/"> Tareas </a></li> 
  <li class='active'> Tarea </li> 
{% endblock %}
{% block content %}
{# <p class="text-info col-md-6 col-xs-12 cl-sm-12">El mensaje que escribas en la caja de texto se enviará a todos los clientes de Microsip que tengan un telefono celular válido registrado en <b>Teléfono 1</b></p> #}
<form method="post" action="" onsubmit="return false;" enctype='multipart/form-data'>{% csrf_token %}
<div >
	<h3>
		<b>Tarea programada</b> 
		<button type="submit" class="btn btn-default" onclick="this.form.submit();$(this).text('Guardando...');this.disabled=true;" >Guardar</button>
	</h3>

</div>
<hr>
{{ form.errors }}
<div class="alert alert-info" role="alert" id="id_siguiente_ejecucion_alert">
	<span id="id_siguiente_ejecucion_text"></span>
	{{ form.next_execution }}
</div>
<div class="row">
	<div class="col-md-3">
		Descripción
		<br>
		{{ form.description }}
	</div>
	<div class="col-md-6">
		Comando
		<br>
		<div class="col-md-2">
			{{ form.command_type }}
		</div>
		<div class="col-md-10">
			{{ form.command }}
		</div>
	</div>
</div>

<div class="row">
	<div class="col-md-3">
		Inicio
		<br>
		{{ form.period_start_datetime }}
	</div>
	<div class="col-md-3">
		Fin
		<br>
		{{ form.period_end_datetime }}
	</div>
	<div class="col-md-3">
		Cada
		<br>
		<div class="col-md-8">
			{{ form.period_quantity }}
		</div>
		<div class="col-md-4">
			{{ form.period_unit }}
		</div>
	</div>
	<div class="col-md-3">
	</div>
</div>
</form>

{% endblock %}