(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){e.exports=a(130)},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),l=a.n(o),c=(a(105),a(6)),i=a(7),s=a(9),u=a(8),m=a(10),p=a(170),d=a(29),f=a(41),h=a(42),b=a(17),g=a.n(b),y=a(18),v=a(11),E=a.n(v),k=a(12),j=a.n(k),x=a(166),O=a(168),w=a(134),C=window.location.origin,N=function(e,t){var a,n,r,o,l,c,i,s,u,m,p;return g.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:for(a=new URL(e,C),n=0,r=Object.entries(t);n<r.length;n++)o=r[n],l=Object(y.a)(o,2),c=l[0],i=l[1],a.searchParams.set(c,i);return d.next=4,g.a.awrap(fetch(a.toString()));case 4:return s=d.sent,d.next=7,g.a.awrap(s.json());case 7:if(u=d.sent,m=u.result,null===(p=u.error)){d.next=11;break}throw Error(p);case 11:return d.abrupt("return",m);case 12:case"end":return d.stop()}}))},S=function(){return N("/api/ray_config",{})},F=function(){return N("/api/node_info",{})},I=function(){return N("/api/raylet_info",{})},L=function(e,t){return N("/api/errors",{hostname:e,pid:t||""})},W=function(e,t){return N("/api/logs",{hostname:e,pid:t||""})},A=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.lastUpdatedAt,n=e.error;return r.a.createElement("div",{className:t.root},null!==a&&r.a.createElement(w.a,{className:t.lastUpdated},"Last updated: ",new Date(a).toLocaleString()),null!==n&&r.a.createElement(w.a,{className:t.error},n))}}]),t}(r.a.Component),R=Object(d.b)((function(e){return{lastUpdatedAt:e.dashboard.lastUpdatedAt,error:e.dashboard.error}}))(j()((function(e){return E()({root:{marginTop:e.spacing(2)},lastUpdated:{color:e.palette.text.secondary,fontSize:"0.8125rem",textAlign:"center"},error:{color:e.palette.error.main,fontSize:"0.8125rem",textAlign:"center"}})}))(A)),M=a(159),T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!0},a.setExpanded=function(e){return function(){a.setState({expanded:e})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.actor,n=this.state.expanded,o=-1!==a.state?[{label:"ID",value:a.actorId},{label:"Resources",value:Object.entries(a.usedResources).length>0&&Object.entries(a.usedResources).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return"".concat(n.toLocaleString()," ").concat(a)})).join(", ")},{label:"Pending",value:void 0!==a.taskQueueLength&&a.taskQueueLength>0&&a.taskQueueLength.toLocaleString()},{label:"Task",value:a.currentTaskFuncDesc&&a.currentTaskFuncDesc.join(".")}]:[{label:"ID",value:a.actorId},{label:"Required resources",value:Object.entries(a.requiredResources).length>0&&Object.entries(a.requiredResources).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return"".concat(n.toLocaleString()," ").concat(a)})).join(", ")}];return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{className:t.title},-1!==a.state?r.a.createElement(r.a.Fragment,null,"Actor ",a.actorId," ",Object.entries(a.children).length>0&&r.a.createElement(r.a.Fragment,null,"(",r.a.createElement("span",{className:t.expandCollapseButton,onClick:this.setExpanded(!n)},n?"Collapse":"Expand"),")")):r.a.createElement("span",{className:t.infeasible},"Infeasible actor")),r.a.createElement(w.a,{className:t.information},o.map((function(e){var a=e.label,n=e.value;return n&&n.length>0&&r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("span",{className:t.datum},a,": ",n)," ")}))),-1!==a.state&&r.a.createElement(r.a.Fragment,null,a.webuiDisplay&&r.a.createElement(w.a,{className:t.webuiDisplay},a.webuiDisplay),r.a.createElement(M.a,{in:n},r.a.createElement(B,{actors:a.children}))))}}]),t}(r.a.Component),_=j()((function(e){return E()({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,marginTop:e.spacing(2),padding:e.spacing(2)},title:{color:e.palette.text.secondary,fontSize:"0.75rem"},infeasible:{color:e.palette.error.main},information:{fontSize:"0.875rem"},datum:{"&:not(:first-child)":{marginLeft:e.spacing(2)}},webuiDisplay:{fontSize:"0.875rem"},expandCollapseButton:{color:e.palette.primary.main,"&:hover":{cursor:"pointer"}}})}))(T),D=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.actors;return Object.entries(e).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return r.a.createElement(_,{actor:n,key:a})}))}}]),t}(r.a.Component),B=j()((function(e){return E()({})}))(D),U=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.rayletInfo;return null===e?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):0===Object.entries(e.actors).length?r.a.createElement(w.a,{color:"textSecondary"},"No actors found."):r.a.createElement("div",null,r.a.createElement(B,{actors:e.actors}))}}]),t}(r.a.Component),z=Object(d.b)((function(e){return{rayletInfo:e.dashboard.rayletInfo}}))(j()((function(e){return E()({})}))(U)),P=a(163),H=a(165),V=a(162),q=a(164),Q=a(161),J=a(86),G=a.n(J),X=a(87),K=a.n(X),Y=a(40),Z=a.n(Y),$=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.text,n=this.props.percent;n=Math.max(n,0);var o=[0,255,0],l=o,c=function(e,t,a){var n=Object(y.a)(e,3),r=n[0],o=n[1],l=n[2],c=Object(y.a)(t,3);return[r*(1-a)+c[0]*a,o*(1-a)+c[1]*a,l*(1-a)+c[2]*a]}(o,[255,0,0],(n=Math.min(n,100))/100),i="\n      linear-gradient(\n        to right,\n        rgba(".concat(l.join(","),", ").concat(.2,") 0%,\n        rgba(").concat(c.join(","),", ").concat(.2,") ").concat(n,"%,\n        transparent ").concat(n,"%\n      )\n    ");return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inner,style:{background:i}},a))}}]),t}(r.a.Component),ee=j()((function(e){return E()({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1},inner:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})}))($),te=function(e){var t=function(e){if(0===e.length)return 0;var t=0,a=0,n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var i=l.value,s=i.weight;t+=s*i.value,a+=s}}catch(u){r=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return t/a}(e.nodes.map((function(e){return{weight:e.cpus[0],value:e.cpu}})));return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(ee,{percent:t,text:"".concat(t.toFixed(1),"%")}))},ae=function(e){var t=e.node;return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(ee,{percent:t.cpu,text:"".concat(t.cpu.toFixed(1),"%")}))},ne=function(e){var t=e.worker;return r.a.createElement("div",{style:{minWidth:60}},r.a.createElement(ee,{percent:t.cpu_percent,text:"".concat(t.cpu_percent.toFixed(1),"%")}))},re=function(e,t){return"".concat((e/("mebibyte"===t?Math.pow(1024,2):Math.pow(1024,3))).toFixed(1)," ").concat("mebibyte"===t?"MiB":"GiB")},oe=function(e,t,a){var n=re(e,a),r=re(t,a),o=100*e/t;return"".concat(n," / ").concat(r," (").concat(o.toFixed(0),"%)")},le=function(e){var t=Math.floor(e)%60,a=Math.floor(e/60)%60,n=Math.floor(e/60/60)%24,r=Math.floor(e/60/60/24),o=function(e){return e.toString().padStart(2,"0")};return[r?"".concat(r,"d"):"","".concat(o(n),"h"),"".concat(o(a),"m"),"".concat(o(t),"s")].join(" ")},ce=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.disk["/"].used,n+=u.disk["/"].total}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(ee,{percent:100*a/n,text:oe(a,n,"gibibyte")})},ie=function(e){var t=e.node;return r.a.createElement(ee,{percent:100*t.disk["/"].used/t.disk["/"].total,text:oe(t.disk["/"].used,t.disk["/"].total,"gibibyte")})},se=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},ue=a(160),me=function(e){return function(t){var a=t.nodes,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=a[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;u.ip in e&&(n+=e[u.ip].total)}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return 0===n?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(r.a.Fragment,null,n.toLocaleString()," ",1===n?"error":"errors")}},pe=function(e){return function(t){var a=t.node;return 0===e.total?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(ue.a,{component:f.b,to:"/errors/".concat(a.hostname)},"View all errors (",e.total.toLocaleString(),")")}},de=function(e){return function(t){var a=t.node,n=t.worker;return 0===e.perWorker[n.pid]?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):r.a.createElement(ue.a,{component:f.b,to:"/errors/".concat(a.hostname,"/").concat(n.pid)},"View errors (",e.perWorker[n.pid].toLocaleString(),")")}},fe=function(e){var t=e.nodes;return r.a.createElement(r.a.Fragment,null,"Totals (",t.length.toLocaleString()," ",1===t.length?"host":"hosts",")")},he=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,t.hostname," (",t.ip,")")},be=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,t.cmdline[0].split("::",2)[0]," (PID: ",t.pid,")")},ge=function(e){return function(t){var a=t.nodes,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=a[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;u.ip in e&&(n+=e[u.ip].total)}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return 0===n?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(r.a.Fragment,null,n.toLocaleString()," ",1===n?"line":"lines")}},ye=function(e){return function(t){var a=t.node;return 0===e.total?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(ue.a,{component:f.b,to:"/logs/".concat(a.hostname)},"View all logs (",e.total.toLocaleString()," ",1===e.total?"line":"lines",")")}},ve=function(e){return function(t){var a=t.node,n=t.worker;return 0===e.perWorker[n.pid]?r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):r.a.createElement(ue.a,{component:f.b,to:"/logs/".concat(a.hostname,"/").concat(n.pid)},"View log (",e.perWorker[n.pid].toLocaleString()," ",1===e.perWorker[n.pid]?"line":"lines",")")}},Ee=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.mem[0]-u.mem[1],n+=u.mem[0]}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(ee,{percent:100*a/n,text:oe(a,n,"gibibyte")})},ke=function(e){var t=e.node;return r.a.createElement(ee,{percent:100*(t.mem[0]-t.mem[1])/t.mem[0],text:oe(t.mem[0]-t.mem[1],t.mem[0],"gibibyte")})},je=function(e){var t=e.node,a=e.worker;return r.a.createElement(ee,{percent:100*a.memory_info.rss/t.mem[0],text:re(a.memory_info.rss,"mebibyte")})},xe=function(e){var t=e.nodes,a=0,n=!0,o=!1,l=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){a+=c.value.net[1]}}catch(s){o=!0,l=s}finally{try{n||null==i.return||i.return()}finally{if(o)throw l}}return r.a.createElement(r.a.Fragment,null,re(a,"mebibyte"),"/s")},Oe=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,re(t.net[1],"mebibyte"),"/s")},we=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},Ce=function(e){var t=e.nodes,a=0,n=!0,o=!1,l=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){a+=c.value.net[0]}}catch(s){o=!0,l=s}finally{try{n||null==i.return||i.return()}finally{if(o)throw l}}return r.a.createElement(r.a.Fragment,null,re(a,"mebibyte"),"/s")},Ne=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,re(t.net[0],"mebibyte"),"/s")},Se=function(){return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},Fe=function(e){return Date.now()/1e3-e},Ie=function(e){e.nodes;return r.a.createElement(w.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},Le=function(e){var t=e.node;return r.a.createElement(r.a.Fragment,null,le(Fe(t.boot_time)))},We=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,le(Fe(t.create_time)))},Ae=function(e){var t=e.nodes,a=0,n=0,o=!0,l=!1,c=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;a+=u.workers.length,n+=u.cpus[0]}}catch(m){l=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return r.a.createElement(r.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," / ",n.toLocaleString()," ",1===n?"core":"cores")},Re=function(e){var t=e.node,a=t.workers.length,n=t.cpus[0];return r.a.createElement(r.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," /"," ",n.toLocaleString()," ",1===n?"core":"cores")},Me=function(e){var t=e.worker;return r.a.createElement(r.a.Fragment,null,t.cmdline[0].split("::",2)[1])},Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:a.props.initialExpanded},a.toggleExpand=function(){a.setState((function(e){return{expanded:!e.expanded}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.node,n=e.raylet,o=e.logCounts,l=e.errorCounts,c=this.state.expanded,i=[{NodeFeature:he,WorkerFeature:be},{NodeFeature:Re,WorkerFeature:Me},{NodeFeature:Le,WorkerFeature:We},{NodeFeature:ae,WorkerFeature:ne},{NodeFeature:ke,WorkerFeature:je},{NodeFeature:ie,WorkerFeature:se},{NodeFeature:Ne,WorkerFeature:Se},{NodeFeature:Oe,WorkerFeature:we},{NodeFeature:ye(o),WorkerFeature:ve(o)},{NodeFeature:pe(l),WorkerFeature:de(l)}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{hover:!0},r.a.createElement(V.a,{className:Z()(t.cell,t.expandCollapseCell),onClick:this.toggleExpand},c?r.a.createElement(K.a,{className:t.expandCollapseIcon}):r.a.createElement(G.a,{className:t.expandCollapseIcon})),i.map((function(e,n){var o=e.NodeFeature;return r.a.createElement(V.a,{className:t.cell,key:n},r.a.createElement(o,{node:a}))}))),c&&r.a.createElement(r.a.Fragment,null,null!==n&&void 0!==n.extraInfo&&r.a.createElement(Q.a,{hover:!0},r.a.createElement(V.a,{className:t.cell}),r.a.createElement(V.a,{className:Z()(t.cell,t.extraInfo),colSpan:i.length},n.extraInfo)),a.workers.map((function(e,n){return r.a.createElement(Q.a,{hover:!0,key:n},r.a.createElement(V.a,{className:t.cell}),i.map((function(n,o){var l=n.WorkerFeature;return r.a.createElement(V.a,{className:t.cell,key:o},r.a.createElement(l,{node:a,worker:e}))})))}))))}}]),t}(r.a.Component),_e=j()((function(e){return E()({cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},expandCollapseCell:{cursor:"pointer"},expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},extraInfo:{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",whiteSpace:"pre"}})}))(Te),De=a(88),Be=a.n(De),Ue=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.nodes,n=e.logCounts,o=e.errorCounts,l=[{ClusterFeature:fe},{ClusterFeature:Ae},{ClusterFeature:Ie},{ClusterFeature:te},{ClusterFeature:Ee},{ClusterFeature:ce},{ClusterFeature:Ce},{ClusterFeature:xe},{ClusterFeature:ge(n)},{ClusterFeature:me(o)}];return r.a.createElement(Q.a,{hover:!0},r.a.createElement(V.a,{className:t.cell},r.a.createElement(Be.a,{className:t.totalIcon})),l.map((function(e,n){var o=e.ClusterFeature;return r.a.createElement(V.a,{className:t.cell,key:n},r.a.createElement(o,{nodes:a}))})))}}]),t}(r.a.Component),ze=j()((function(e){return E()({cell:{borderTopColor:e.palette.divider,borderTopStyle:"solid",borderTopWidth:2,padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},totalIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"}})}))(Ue),Pe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.nodeInfo,n=e.rayletInfo;if(null===a||null===n)return r.a.createElement(w.a,{color:"textSecondary"},"Loading...");var o={},l={},c=!0,i=!1,s=void 0;try{for(var u,m=a.clients[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var p=u.value;o[p.ip]={perWorker:{},total:0},l[p.ip]={perWorker:{},total:0};var d=!0,f=!1,h=void 0;try{for(var b,g=p.workers[Symbol.iterator]();!(d=(b=g.next()).done);d=!0){var v=b.value;o[p.ip].perWorker[v.pid]=0,l[p.ip].perWorker[v.pid]=0}}catch(B){f=!0,h=B}finally{try{d||null==g.return||g.return()}finally{if(f)throw h}}}}catch(B){i=!0,s=B}finally{try{c||null==m.return||m.return()}finally{if(i)throw s}}for(var E=0,k=Object.keys(a.log_counts);E<k.length;E++){var j=k[E];if(j in o)for(var x=0,O=Object.entries(a.log_counts[j]);x<O.length;x++){var C=O[x],N=Object(y.a)(C,2),S=N[0],F=N[1];o[j].perWorker[S]=F,o[j].total+=F}}for(var I=0,L=Object.keys(a.error_counts);I<L.length;I++){var W=L[I];if(W in l)for(var A=0,R=Object.entries(a.error_counts[W]);A<R.length;A++){var M=R[A],T=Object(y.a)(M,2),_=T[0],D=T[1];l[W].perWorker[_]=D,l[W].total+=D}}return r.a.createElement(P.a,{className:t.table},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(V.a,{className:t.cell}),r.a.createElement(V.a,{className:t.cell},"Host"),r.a.createElement(V.a,{className:t.cell},"Workers"),r.a.createElement(V.a,{className:t.cell},"Uptime"),r.a.createElement(V.a,{className:t.cell},"CPU"),r.a.createElement(V.a,{className:t.cell},"RAM"),r.a.createElement(V.a,{className:t.cell},"Disk"),r.a.createElement(V.a,{className:t.cell},"Sent"),r.a.createElement(V.a,{className:t.cell},"Received"),r.a.createElement(V.a,{className:t.cell},"Logs"),r.a.createElement(V.a,{className:t.cell},"Errors"))),r.a.createElement(H.a,null,a.clients.map((function(e){return r.a.createElement(_e,{key:e.ip,node:e,raylet:e.ip in n.nodes?n.nodes[e.ip]:null,logCounts:o[e.ip],errorCounts:l[e.ip],initialExpanded:a.clients.length<=4})})),r.a.createElement(ze,{nodes:a.clients,logCounts:o,errorCounts:l})))}}]),t}(r.a.Component),He=Object(d.b)((function(e){return{nodeInfo:e.dashboard.nodeInfo,rayletInfo:e.dashboard.rayletInfo}}))(j()((function(e){return E()({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})}))(Pe)),Ve=a(67),qe=Object(Ve.b)({name:"dashboard",initialState:{tab:0,rayConfig:null,nodeInfo:null,rayletInfo:null,lastUpdatedAt:null,error:null},reducers:{setTab:function(e,t){e.tab=t.payload},setRayConfig:function(e,t){e.rayConfig=t.payload},setNodeAndRayletInfo:function(e,t){e.nodeInfo=t.payload.nodeInfo,e.rayletInfo=t.payload.rayletInfo,e.lastUpdatedAt=Date.now()},setError:function(e,t){e.error=t.payload}}}),Qe=qe.actions,Je=qe.reducer,Ge=Qe,Xe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshRayConfig=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(S());case 3:e=t.sent,a.props.setRayConfig(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.prev=9,setTimeout(a.refreshRayConfig,1e4),t.finish(9);case 12:case"end":return t.stop()}}),null,null,[[0,7,9,12]])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(this.refreshRayConfig());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.rayConfig;if(null===a)return r.a.createElement(w.a,{color:"textSecondary"},"No Ray configuration detected.");var n=[{key:"Autoscaling mode",value:a.autoscaling_mode},{key:"Head node type",value:a.head_type},{key:"Worker node type",value:a.worker_type},{key:"Min worker nodes",value:a.min_workers},{key:"Initial worker nodes",value:a.initial_workers},{key:"Max worker nodes",value:a.max_workers},{key:"Idle timeout",value:"".concat(a.idle_timeout_minutes," ").concat(1===a.idle_timeout_minutes?"minute":"minutes")}];return r.a.createElement("div",null,r.a.createElement(w.a,null,"Ray cluster configuration:"),r.a.createElement(P.a,{className:t.table},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(V.a,{className:t.cell},"Setting"),r.a.createElement(V.a,{className:t.cell},"Value"))),r.a.createElement(H.a,null,n.map((function(e,a){var n=e.key,o=e.value;return r.a.createElement(Q.a,{key:a},r.a.createElement(V.a,{className:Z()(t.cell,t.key)},n),r.a.createElement(V.a,{className:t.cell},o))})))))}}]),t}(r.a.Component),Ke=Object(d.b)((function(e){return{rayConfig:e.dashboard.rayConfig}}),Ge)(j()((function(e){return E()({table:{marginTop:e.spacing(1),width:"auto"},cell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),textAlign:"center","&:last-child":{paddingRight:e.spacing(3)}},key:{color:e.palette.text.secondary}})}))(Xe)),Ye=Qe,Ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshNodeAndRayletInfo=function(){var e,t,n,r;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,g.a.awrap(Promise.all([F(),I()]));case 3:e=o.sent,t=Object(y.a)(e,2),n=t[0],r=t[1],a.props.setNodeAndRayletInfo({nodeInfo:n,rayletInfo:r}),a.props.setError(null),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),a.props.setError(o.t0.toString());case 14:return o.prev=14,setTimeout(a.refreshNodeAndRayletInfo,1e3),o.finish(14);case 17:case"end":return o.stop()}}),null,null,[[0,11,14,17]])},a.handleTabChange=function(e,t){a.props.setTab(t)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(this.refreshNodeAndRayletInfo());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.tab,n=[{label:"Machine view",component:He},{label:"Logical view",component:z},{label:"Ray config",component:Ke}],o=n[a].component;return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{variant:"h5"},"Ray Dashboard"),r.a.createElement(O.a,{className:t.tabs,indicatorColor:"primary",onChange:this.handleTabChange,textColor:"primary",value:a},n.map((function(e){var t=e.label;return r.a.createElement(x.a,{key:t,label:t})}))),r.a.createElement(o,null),r.a.createElement(R,null))}}]),t}(r.a.Component),$e=Object(d.b)((function(e){return{tab:e.dashboard.tab}}),Ye)(j()((function(e){return E()({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)}},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1}})}))(Ze)),et=a(53),tt=a(169),at=a(167),nt=a(90),rt=a.n(nt),ot=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleClose,n=e.title;return r.a.createElement(tt.a,{classes:{paper:t.paper},fullWidth:!0,maxWidth:"md",onClose:a,open:!0,scroll:"body"},r.a.createElement(at.a,{className:t.closeButton,onClick:a},r.a.createElement(rt.a,null)),r.a.createElement(w.a,{className:t.title},n),this.props.children)}}]),t}(r.a.Component),lt=j()((function(e){return E()({paper:{padding:e.spacing(3)},closeButton:{position:"absolute",right:e.spacing(1.5),top:e.spacing(1.5),zIndex:1},title:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1,fontSize:"1.5rem",lineHeight:1,marginBottom:e.spacing(3),paddingBottom:e.spacing(3)}})}))(ot),ct=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.lines;return r.a.createElement(P.a,null,r.a.createElement(H.a,null,a.map((function(e,a){return r.a.createElement(Q.a,{key:a},r.a.createElement(V.a,{className:Z()(t.cell,t.lineNumber),"data-line-number":a+1}),r.a.createElement(V.a,{className:Z()(t.cell,t.line)},e))}))))}}]),t}(r.a.Component),it=j()((function(e){return E()({root:{overflowX:"auto"},cell:{borderWidth:0,fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",padding:0,"&:last-child":{paddingRight:0}},lineNumber:{color:e.palette.text.secondary,paddingRight:e.spacing(2),textAlign:"right",verticalAlign:"top",width:"1%","&::before":{content:"attr(data-line-number)"}},line:{textAlign:"left",whiteSpace:"pre-wrap"}})}))(ct),st=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={result:null,error:null},a.handleClose=function(){a.props.history.push("/")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e=this.props.match,t=e.params,a=t.hostname,n=t.pid,o.next=5,g.a.awrap(L(a,n));case 5:r=o.sent,this.setState({result:r,error:null}),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),this.setState({result:null,error:o.t0.toString()});case 12:case"end":return o.stop()}}),null,this,[[0,9]])}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.match,n=this.state,o=n.result,l=n.error,c=a.params.hostname;return r.a.createElement(lt,{handleClose:this.handleClose,title:"Errors"},null!==l?r.a.createElement(w.a,{color:"error"},l):null===o?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):Object.entries(o).map((function(e){var a=Object(y.a)(e,2),n=a[0],o=a[1];return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(w.a,{className:t.header},c," (PID: ",n,")"),o.length>0?o.map((function(e,a){var n=e.message,o=e.timestamp;return r.a.createElement("div",{className:t.error,key:a},r.a.createElement(w.a,{className:t.timestamp},"Error at ",new Date(1e3*o).toLocaleString()),r.a.createElement(it,{lines:n.trim().split("\n")}))})):r.a.createElement(w.a,{color:"textSecondary"},"No errors found."))})))}}]),t}(r.a.Component),ut=j()((function(e){return E()({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},error:{backgroundColor:Object(et.fade)(e.palette.error.main,.04),borderLeftColor:e.palette.error.main,borderLeftStyle:"solid",borderLeftWidth:2,marginTop:e.spacing(3),padding:e.spacing(2)},timestamp:{color:e.palette.text.secondary,marginBottom:e.spacing(1)}})}))(st),mt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={result:null,error:null},a.handleClose=function(){a.props.history.push("/")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e=this.props.match,t=e.params,a=t.hostname,n=t.pid,o.next=5,g.a.awrap(W(a,n));case 5:r=o.sent,this.setState({result:r,error:null}),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),this.setState({result:null,error:o.t0.toString()});case 12:case"end":return o.stop()}}),null,this,[[0,9]])}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.match,n=this.state,o=n.result,l=n.error,c=a.params.hostname;return r.a.createElement(lt,{handleClose:this.handleClose,title:"Logs"},null!==l?r.a.createElement(w.a,{color:"error"},l):null===o?r.a.createElement(w.a,{color:"textSecondary"},"Loading..."):Object.entries(o).map((function(e){var a=Object(y.a)(e,2),n=a[0],o=a[1];return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(w.a,{className:t.header},c," (PID: ",n,")"),o.length>0?r.a.createElement("div",{className:t.log},r.a.createElement(it,{lines:o})):r.a.createElement(w.a,{color:"textSecondary"},"No logs found."))})))}}]),t}(r.a.Component),pt=j()((function(e){return E()({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},log:{backgroundColor:Object(et.fade)(e.palette.primary.main,.04),borderLeftColor:e.palette.primary.main,borderLeftStyle:"solid",borderLeftWidth:2,padding:e.spacing(2)}})}))(mt),dt=Object(Ve.a)({reducer:{dashboard:Je},devTools:!1}),ft=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:dt},r.a.createElement(f.a,null,r.a.createElement(p.a,null),r.a.createElement($e,null),r.a.createElement(h.a,{component:pt,path:"/logs/:hostname/:pid?"}),r.a.createElement(h.a,{component:ut,path:"/errors/:hostname/:pid?"})))}}]),t}(r.a.Component);l.a.render(r.a.createElement(ft,null),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.ce21cc62.chunk.js.map