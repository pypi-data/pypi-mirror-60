{"version":3,"file":"locate.js","sources":["../../node_modules/@wq/map/src/locate.js"],"sourcesContent":["import L from 'leaflet';\n\n// Exported module object\nvar locate = {\n    name: 'locate',\n    config: {\n        fieldNames: {\n            latitude: 'latitude',\n            longitude: 'longitude',\n            geometry: 'geometry',\n            accuracy: 'accuracy',\n            toggle: 'toggle',\n            mode: 'mode',\n            source: 'source'\n        }\n    }\n};\n\nlocate.init = function(conf) {\n    L.extend(locate.config, conf || {});\n};\n\nlocate.locators = {};\n\n// wq/app.js plugin\nlocate.run = function($page, routeInfo) {\n    if (!routeInfo.page_config.locate) {\n        return;\n    }\n    var map = locate.app.plugins.map.getMap(routeInfo),\n        mapId = locate.app.plugins.map.getMapId(routeInfo);\n    if (!map) {\n        return;\n    }\n    var fields = {};\n    for (var field in locate.config.fieldNames) {\n        var name = locate.config.fieldNames[field];\n        fields[field] = $page.find('[name=' + name + ']');\n    }\n    var locator = locate.locator(map, fields, locate.config);\n    $page.on('pagehide', function() {\n        locator.stop();\n    });\n    locate.locators[mapId] = locator;\n};\n\n// Interactive GPS & map-based locator tool\n// map should be an L.map; fields should be an map of keys to jQuery-wrapped\n// <input>s\nlocate.Locator = function(map, fields, opts) {\n    var self = this;\n\n    if (!fields) {\n        fields = {};\n    }\n    if (!opts) {\n        opts = {};\n    }\n    if (!opts.precision) {\n        opts.precision = 6;\n    }\n\n    var _mode, _marker, _circle, _lastSource, _hasSource;\n\n    // Mode switching functions (define fields.toggle for default usage)\n    self.setMode = function(mode) {\n        if (!mode || !self[mode + 'Start']) {\n            return;\n        }\n        self.stop();\n        _mode = mode;\n        self.start();\n        if (opts.onSetMode) {\n            opts.onSetMode(mode);\n        }\n    };\n\n    self.start = function() {\n        if (_mode) {\n            self[_mode + 'Start']();\n        }\n    };\n\n    self.stop = function() {\n        if (_mode) {\n            self[_mode + 'Stop']();\n        }\n    };\n\n    // GPS mode\n    self.gpsStart = function() {\n        var locateOpts = {\n            enableHighAccuracy: true,\n            watch: true,\n            setView: true,\n            timeout: 60 * 1000\n        };\n        map.off('locationfound');\n        map.off('locationerror');\n        map.on('locationfound', success);\n        map.on('locationerror', error);\n        map.locate(locateOpts);\n        function success(evt) {\n            self.update(evt.latlng, evt.accuracy, _lastSource);\n        }\n        function error(evt) {\n            self.onerror(evt);\n        }\n    };\n\n    self.gpsStop = function() {\n        map.stopLocate();\n    };\n\n    // Interactive mode\n    self.interactiveStart = function() {\n        L.DomUtil.addClass(map._container, 'interactive');\n    };\n\n    self.interactiveStop = function() {\n        L.DomUtil.removeClass(map._container, 'interactive');\n    };\n\n    // Manual mode\n    self.manualStart = function() {\n        if (!fields.latitude || !fields.longitude) {\n            return;\n        }\n        fields.latitude.attr('readonly', false);\n        fields.longitude.attr('readonly', false);\n    };\n\n    self.manualStop = function() {\n        fields.latitude.attr('readonly', true);\n        fields.longitude.attr('readonly', true);\n    };\n\n    // Default Circle & Marker generators, override to customize\n    self.makeCircle = function() {\n        return L.circle([0, 0], 1, { weight: 1 });\n    };\n\n    self.makeMarker = function() {\n        return L.marker([0, 0]);\n    };\n\n    // Display and save updates to location\n    self.update = function(loc, accuracy, source) {\n        if (!_marker) {\n            _marker = self.makeMarker().addTo(map);\n        }\n        if (!_circle) {\n            _circle = self.makeCircle().addTo(map);\n        }\n        // Update display\n        _marker.setLatLng(loc);\n        _circle.setLatLng(loc).setRadius(accuracy);\n\n        // Save to fields\n        if (fields) {\n            if (fields.latitude) {\n                fields.latitude.val(L.Util.formatNum(loc.lat, opts.precision));\n            }\n            if (fields.longitude) {\n                fields.longitude.val(L.Util.formatNum(loc.lng, opts.precision));\n            }\n            if (fields.geometry) {\n                fields.geometry.val(\n                    JSON.stringify({\n                        type: 'Point',\n                        coordinates: [loc.lng, loc.lat]\n                    })\n                );\n            }\n            if (fields.accuracy) {\n                fields.accuracy.val(accuracy);\n            }\n            if (fields.mode) {\n                fields.mode.val(_mode);\n            }\n            if (fields.source && _hasSource) {\n                var sourceInfo;\n                if (!source) {\n                    source = {};\n                }\n                if (source.type == 'external') {\n                    sourceInfo = source.identifier;\n                } else if (source.type == 'internal') {\n                    sourceInfo = 'Device Location Services';\n                } else {\n                    sourceInfo = source.type || 'Unknown';\n                }\n                if (source.typeIsGuess) {\n                    sourceInfo += ' (guess)';\n                }\n                fields.source.val(sourceInfo);\n            }\n        }\n\n        // User-defined callback (FIXME: make event?)\n        if (opts.onUpdate) {\n            opts.onUpdate(loc, accuracy);\n        }\n    };\n\n    self.onerror = function(evt) {\n        if (window.console) {\n            window.console.log('Error retrieving coordinates!');\n        }\n        if (opts.onError) {\n            opts.onError(evt);\n        }\n    };\n\n    // Respond to map clicks in interactive mode\n    function _clickMap(evt) {\n        if (_mode != 'interactive') {\n            return;\n        }\n        // Estimate accuracy based on viewport information\n        // (higher zoom = better accuracy)\n        var ll = map.getBounds();\n        var px = map.getPixelBounds();\n        var distance = ll.getNorthWest().distanceTo(ll.getSouthWest());\n        var height = px.getSize().y;\n\n        // Assume accuracy is equivalent to the real-world length represented\n        // by 2 pixels\n        var accuracy = L.Util.formatNum((distance / height) * 2, 3);\n\n        self.update(evt.latlng, accuracy);\n    }\n\n    function _updateManual() {\n        if (_mode != 'manual') {\n            return;\n        }\n        self.update(\n            L.latLng(fields.latitude.val(), fields.longitude.val()),\n            null\n        );\n    }\n\n    function _getVal($input) {\n        if ($input.is('select')) {\n            return $input.val();\n        } else if ($input.is('input[type=radio]')) {\n            return $input.filter(':checked').val();\n        }\n        return null;\n    }\n\n    // Leaflet events\n    map.on('click', _clickMap);\n\n    // Detect cordova-plugin-bluetooth-geolocation\n    _hasSource = navigator.geolocation && navigator.geolocation.hasSource;\n    if (_hasSource) {\n        map._handleGeolocationResponse = function(pos) {\n            _lastSource = pos.source;\n            L.Map.prototype._handleGeolocationResponse.call(map, pos);\n        };\n    }\n\n    // jQuery Events\n    if (fields.toggle) {\n        fields.toggle.on('click', function() {\n            self.setMode(_getVal(fields.toggle));\n        });\n        self.setMode(_getVal(fields.toggle));\n    }\n\n    if (fields.latitude && fields.longitude) {\n        fields.latitude.on('change', _updateManual);\n        fields.longitude.on('change', _updateManual);\n    }\n};\n\n// Leaflet-style generator function\nlocate.locator = function(map, fields, opts) {\n    return new locate.Locator(map, fields, opts);\n};\n\nexport default locate;\n"],"names":["locate","name","config","fieldNames","latitude","longitude","geometry","accuracy","toggle","mode","source","init","conf","L","extend","locators","run","$page","routeInfo","page_config","map","app","plugins","getMap","mapId","getMapId","fields","field","find","locator","on","stop","Locator","opts","self","precision","_mode","_marker","_circle","_lastSource","_hasSource","setMode","start","onSetMode","gpsStart","locateOpts","enableHighAccuracy","watch","setView","timeout","off","success","error","evt","update","latlng","onerror","gpsStop","stopLocate","interactiveStart","DomUtil","addClass","_container","interactiveStop","removeClass","manualStart","attr","manualStop","makeCircle","circle","weight","makeMarker","marker","loc","addTo","setLatLng","setRadius","val","Util","formatNum","lat","lng","JSON","stringify","type","coordinates","sourceInfo","identifier","typeIsGuess","onUpdate","window","console","log","onError","_clickMap","ll","getBounds","px","getPixelBounds","distance","getNorthWest","distanceTo","getSouthWest","height","getSize","y","_updateManual","latLng","_getVal","$input","is","filter","navigator","geolocation","hasSource","_handleGeolocationResponse","pos","Map","prototype","call"],"mappings":"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"}