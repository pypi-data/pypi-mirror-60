{"version":3,"file":"router.js","sources":["../../node_modules/strict-uri-encode/index.js","../../node_modules/decode-uri-component/index.js","../../node_modules/split-on-first/index.js","../../node_modules/query-string/index.js","../../node_modules/@wq/router/src/router.js"],"sourcesContent":["'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn key => (result, value, index) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(',')];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(',') > -1;\n\t\t\t\tconst newValue = isArray ? value.split(',') : value;\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(param.replace(/\\+/g, ' '), '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = encoderForArrayFormat(options);\n\tconst keys = Object.keys(object);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: removeHash(input).split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","import { connectRoutes, push, NOT_FOUND, ADD_ROUTES } from 'redux-first-router';\nimport queryString from 'query-string';\nimport { getStore } from '@wq/store';\n\nimport tmpl from '@wq/template';\n\nconst HTML = '@@HTML',\n    RENDER = 'RENDER',\n    FIRST = '@@FIRST',\n    DEFAULT = '@@DEFAULT',\n    LAST = '@@LAST',\n    validOrder = {\n        [FIRST]: true,\n        [DEFAULT]: true,\n        [LAST]: true\n    };\n\n// Exported module object\nvar router = {\n    config: {\n        store: 'main',\n        tmpl404: '404',\n        injectOnce: false,\n        debug: false,\n        getTemplateName: name => name\n    },\n    routesMap: {},\n    contextProcessors: [],\n    renderers: [render]\n};\nvar $, jqm;\n\n// Configuration\nrouter.init = function(config) {\n    // Define baseurl (without trailing slash) if it is not /\n    if (config && config.base_url) {\n        router.base_url = config.base_url;\n    }\n\n    router.config = {\n        ...router.config,\n        ...config\n    };\n\n    // Configuration options:\n    // Define `tmpl404` if there is not a template named '404'\n    // Set `injectOnce`to true to re-use rendered templates\n    // Set `debug` to true to log template & context information\n    // Set getTemplateName to change how route names are resolved.\n\n    $ = config.jQuery || window.jQuery;\n    jqm = $.mobile;\n\n    const {\n        reducer: routeReducer,\n        middleware,\n        enhancer,\n        initialDispatch\n    } = connectRoutes(\n        {},\n        { querySerializer: queryString, initialDispatch: false }\n    );\n    router.store = getStore(router.config.store);\n    router.store.addReducer('location', routeReducer);\n    router.store.addReducer('context', contextReducer);\n    router.store.addEnhancer(enhancer);\n    router.store.addMiddleware(middleware);\n    router.store.setThunkHandler(router.addThunk);\n    router.store.subscribe(router.go);\n    router._initialDispatch = initialDispatch;\n};\n\nrouter.jqmInit = function() {\n    if (!router.config) {\n        throw new Error('Initialize router first!');\n    }\n    var orderedRoutes = {};\n    [FIRST, DEFAULT, LAST].forEach(function(order) {\n        Object.entries(router.routesMap).forEach(([name, path]) => {\n            if (path.order === order) {\n                orderedRoutes[name] = path;\n            }\n        });\n    });\n    router.store.dispatch({\n        type: ADD_ROUTES,\n        payload: { routes: orderedRoutes }\n    });\n    router._initialDispatch();\n\n    jqm.initializePage();\n};\n\nfunction contextReducer(context = {}, action) {\n    if (action.type != RENDER && action.type != NOT_FOUND) {\n        return context;\n    }\n    if (action.type === RENDER) {\n        context = action.payload;\n    } else if (action.type === NOT_FOUND) {\n        context = _routeInfo({\n            ...action.meta.location.current,\n            prev: action.meta.location.prev\n        });\n    }\n    return context;\n}\n\nasync function _generateContext(dispatch, getState, refresh = false) {\n    const location = getState().location;\n    var context = _routeInfo(location);\n    for (var i = 0; i < router.contextProcessors.length; i++) {\n        var fn = router.contextProcessors[i];\n        context = {\n            ...context,\n            ...((await fn(context)) || {})\n        };\n    }\n    return router.render(context, refresh);\n}\n\nrouter.register = function(path, nameOrContext, context, order = DEFAULT) {\n    var name;\n    const newUsage = ' Usage: router.register(path[, name[, contextFn]])';\n    if (!validOrder[order]) {\n        // Assume old-style prevent() callback was passed\n        throw new Error('prevent() no longer supported.' + newUsage);\n    }\n\n    if (context) {\n        if (typeof context !== 'function') {\n            throw new Error(\n                'Unexpected ' + context + ' for contextFn.' + newUsage\n            );\n        }\n    } else if (typeof nameOrContext === 'function') {\n        context = nameOrContext;\n        nameOrContext = null;\n    }\n\n    if (nameOrContext) {\n        name = nameOrContext;\n        if (typeof name !== 'string') {\n            throw new Error(\n                'Unexpected ' + name + ' for route name.' + newUsage\n            );\n        }\n    } else {\n        if (path.indexOf('/') > -1) {\n            throw new Error(\n                'router.register() now requires a route name if path contains /.' +\n                    newUsage\n            );\n        }\n        // Assume there is a template with the same name\n        name = path;\n    }\n\n    if (context && context.length > 1) {\n        throw new Error(\n            'contextFn should take a single argument (the existing context) and return a new context for merging.  router.go() is now called automatically.'\n        );\n    }\n\n    router.routesMap[name.toUpperCase()] = {\n        path: _normalizePath(path),\n        thunk: (dispatch, getState) => _generateContext(dispatch, getState),\n        order\n    };\n\n    if (context) {\n        router.addContextForRoute(name, context);\n    }\n    return name;\n};\n\nrouter.registerFirst = function(path, name, context) {\n    router.register(path, name, context, FIRST);\n};\n\nrouter.registerLast = function(path, name, context) {\n    router.register(path, name, context, LAST);\n};\n\nrouter.addThunk = function(name, thunk) {\n    router.routesMap[name] = {\n        thunk,\n        order: FIRST\n    };\n};\n\nrouter.addThunks = function(thunks) {\n    Object.entries(thunks).forEach(([name, thunk]) => {\n        router.addThunk(name, thunk);\n    });\n};\n\nrouter.addContext = function(fn) {\n    router.contextProcessors.push(fn);\n};\n\nrouter.addContextForRoute = function(pathOrName, fn) {\n    const name = _getRouteName(pathOrName);\n    function contextForRoute(context) {\n        if (context.router_info.name == name) {\n            return fn(context);\n        } else {\n            return {};\n        }\n    }\n    router.addContext(contextForRoute);\n};\n\nrouter.onShow = function(pathOrName, fn) {\n    router.addRoute(pathOrName, 's', fn);\n};\n\nconst jqmEvents = {\n    s: 'pageshow',\n    c: 'pagecreate',\n    i: 'pageinit',\n    l: 'pageload'\n    // 'h': 'pagehide',\n};\n\nrouter.addRoute = function(pathOrName, eventCode, fn, obj) {\n    if (!jqmEvents[eventCode]) {\n        throw new Error(\n            \"addRoute for '\" + eventCode + \"' not currently supported\"\n        );\n    }\n    if (obj) {\n        fn = obj[fn];\n    }\n    const name = _getRouteName(pathOrName);\n    $('body').on(jqmEvents[eventCode] + '.' + name, function() {\n        const state = router.store.getState(),\n            { context } = state,\n            { router_info } = context || {};\n        if (router_info && router_info.name == name) {\n            fn();\n        }\n    });\n};\n\nrouter.addRender = function(render) {\n    router.renderers.push(render);\n};\n\nrouter.push = function(path) {\n    push(path);\n};\n\nrouter.render = function(context, refresh) {\n    if (refresh) {\n        if (refresh === true) {\n            refresh = (context._refreshCount || 0) + 1;\n        }\n        context._refreshCount = refresh;\n    }\n    return router.store.dispatch({\n        type: RENDER,\n        payload: context\n    });\n};\n\n// Re-render existing context\nrouter.refresh = function() {\n    var context = router.store.getState().context;\n    router.render(context, true);\n};\n\n// Regenerate context, then re-render page\nrouter.reload = function() {\n    const context = router.store.getState().context,\n        refresh = (context._refreshCount || 0) + 1;\n    return _generateContext(\n        action => router.store.dispatch(action),\n        () => router.store.getState(),\n        refresh\n    );\n};\n\n// Inject and display page\nrouter.go = function(arg) {\n    if (arg) {\n        throw new Error('router.go() is now called automatically');\n    }\n    const state = router.store.getState();\n    router.renderers.forEach(render => {\n        try {\n            render(state);\n        } catch (e) {\n            console.error(e);\n        }\n    });\n};\n\nvar _lastPath, _lastRefresh;\nfunction render(state) {\n    const { location, context } = state,\n        { router_info, _refreshCount: refresh } = context || {},\n        { full_path: url, dom_id: pageid, name: routeName } = router_info || {},\n        once = null, // FIXME\n        ui = null; // FIXME\n\n    if (!routeName || routeName != location.type.toLowerCase()) {\n        return;\n    }\n    if (url === _lastPath && refresh === _lastRefresh) {\n        return;\n    }\n\n    _lastPath = url;\n    _lastRefresh = refresh;\n\n    var template;\n    if (location.type === NOT_FOUND || context[NOT_FOUND]) {\n        template = router.config.tmpl404;\n        context.url = url;\n    } else {\n        template = router.config.getTemplateName(routeName, context);\n    }\n\n    var $page,\n        role,\n        options,\n        html = context[HTML];\n    if (html) {\n        if (router.config.debug) {\n            console.log('Injecting pre-rendered HTML:');\n            console.log(html);\n        }\n        $page = tmpl.injectHTML(html, url, pageid);\n    } else {\n        if (router.config.debug) {\n            console.log(\n                'Rendering ' +\n                    url +\n                    \" with template '\" +\n                    template +\n                    \"' and context:\"\n            );\n            console.log(context);\n        }\n        if (once || router.config.injectOnce) {\n            // Only render the template once\n            $page = tmpl.injectOnce(template, context, url, pageid);\n        } else {\n            // Default: render the template every time the page is loaded\n            $page = tmpl.inject(template, context, url, pageid);\n        }\n    }\n\n    $page.on('click', 'a', _handleLink);\n\n    role = $page.jqmData('role') || 'page';\n    if (role == 'page') {\n        options = (ui && ui.options) || {};\n        options.allowSamePageTransition = true;\n        jqm.changePage($page, options);\n    } else if (role == 'popup') {\n        options = {};\n        if (ui && ui.options) {\n            options.transition = ui.options.transition;\n            options.positionTo = $page.data('wq-position-to');\n            var link = ui.options.link;\n            if (link) {\n                if (link.jqmData('position-to')) {\n                    options.positionTo = link.jqmData('position-to');\n                }\n                // 'origin' won't work since we're opening the popup manually\n                if (!options.positionTo || options.positionTo == 'origin') {\n                    options.positionTo = link[0];\n                }\n                // Remove link highlight *after* popup is closed\n                $page.bind('popupafterclose.resetlink', function() {\n                    link.removeClass('ui-btn-active');\n                    $(this).unbind('popupafterclose.resetlink');\n                });\n            }\n        }\n        $page.popup('open', options);\n    } else if (role == 'panel') {\n        $page.panel('open');\n    }\n    return $page;\n}\n\nfunction _handleLink(evt) {\n    const target = evt.currentTarget;\n    if (target.rel === 'external') {\n        return;\n    }\n    const href = target.href;\n    if (href === undefined) {\n        return;\n    }\n    const url = new URL(href, window.location);\n    if (url.origin != window.location.origin) {\n        return;\n    }\n    evt.preventDefault();\n    router.push(url.pathname + url.search);\n}\n\n// Simple 404 page helper\nrouter.notFound = function() {\n    return {\n        [NOT_FOUND]: true\n    };\n};\n\n// Use when loading HTML from server\nrouter.rawHTML = function(html) {\n    return {\n        [HTML]: html\n    };\n};\n\nrouter.base_url = '';\n\nfunction _normalizePath(path) {\n    path = path.replace('<slug>', ':slug');\n    return router.base_url + '/' + path;\n}\n\nfunction _getRouteName(pathOrName) {\n    var name;\n    if (router.routesMap[pathOrName.toUpperCase()]) {\n        name = pathOrName;\n    } else {\n        Object.entries(router.routesMap).forEach(([rname, rpath]) => {\n            if (_normalizePath(pathOrName) === rpath.path) {\n                name = rname;\n            }\n        });\n    }\n    if (!name) {\n        throw new Error('Unrecognized route: ' + pathOrName);\n    }\n    return name.toLowerCase();\n}\n\nfunction _removeBase(pathname) {\n    return pathname.replace(router.base_url + '/', '');\n}\n\nfunction _routeInfo(location) {\n    var info = {};\n    info.name = location.type.toLowerCase();\n    info.prev_path = _removeBase(location.prev.pathname);\n    info.path = _removeBase(location.pathname);\n    info.path_enc = escape(info.path);\n    info.full_path =\n        location.pathname + (location.search ? '?' + location.search : '');\n    info.full_path_enc = escape(info.full_path);\n    info.params = location.query;\n    info.slugs = location.payload;\n    info.base_url = router.base_url;\n    return {\n        router_info: info,\n        rt: router.base_url\n    };\n}\n\nexport default router;\n"],"names":["str","encodeURIComponent","replace","x","charCodeAt","toString","toUpperCase","token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","length","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","i","customDecodeURIComponent","replaceMap","exec","result","entries","Object","keys","key","encodedURI","TypeError","string","separator","separatorIndex","indexOf","encoderForArrayFormat","options","arrayFormat","value","index","undefined","encode","parserForArrayFormat","accumulator","isArray","newValue","strict","strictUriEncode","decodeComponent","keysSorter","sort","a","b","Number","map","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","isNaN","trim","parseBooleans","toLowerCase","parse","assign","formatter","ret","create","param","splitOnFirst","k","reduce","Boolean","object","filter","url","query","HTML","RENDER","FIRST","DEFAULT","LAST","validOrder","router","config","store","tmpl404","injectOnce","debug","getTemplateName","name","routesMap","contextProcessors","renderers","render","$","jqm","init","base_url","jQuery","window","mobile","connectRoutes","querySerializer","queryString","initialDispatch","routeReducer","reducer","middleware","enhancer","getStore","addReducer","contextReducer","addEnhancer","addMiddleware","setThunkHandler","addThunk","subscribe","go","_initialDispatch","jqmInit","Error","orderedRoutes","forEach","order","path","dispatch","type","ADD_ROUTES","payload","routes","initializePage","context","action","NOT_FOUND","_routeInfo","meta","location","current","prev","_generateContext","getState","refresh","fn","register","nameOrContext","newUsage","_normalizePath","thunk","addContextForRoute","registerFirst","registerLast","addThunks","thunks","addContext","push","pathOrName","_getRouteName","contextForRoute","router_info","onShow","addRoute","jqmEvents","s","c","l","eventCode","obj","on","state","addRender","_refreshCount","reload","arg","e","console","error","_lastPath","_lastRefresh","full_path","pageid","dom_id","routeName","template","$page","role","html","log","tmpl","injectHTML","once","inject","_handleLink","jqmData","ui","allowSamePageTransition","changePage","popup","panel","evt","target","currentTarget","rel","href","URL","origin","preventDefault","pathname","search","notFound","rawHTML","rname","rpath","_removeBase","info","prev_path","path_enc","escape","full_path_enc","params","slugs","rt"],"mappings":"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"}